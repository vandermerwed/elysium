---
import { SOCIALS } from "@config";
import LinkButton from "./LinkButton.astro";
import socialIcons from "@assets/socialIcons";

export interface Props {
  centered?: boolean;
  descriptions?: Record<string, string>;
  className?: string;
}

const { centered = false, descriptions = {}, className = "" } = Astro.props;
---

<div class={`social-icons ${centered ? "flex" : ""} ${className}`}>
  {
    SOCIALS.filter(social => social.active).map(social => (
      <LinkButton
        href={social.href}
        className="link-button"
        title={social.linkTitle}
      >
        <Fragment set:html={socialIcons[social.name]} />
        <span class="sr-only">{social.linkTitle}</span>
        {descriptions[social.name] && (
          <span class="social-tooltip">{descriptions[social.name]}</span>
        )}
      </LinkButton>
    ))
  }
  <a
    target="_blank"
    href="/rss.xml"
    class=" link-button group scale-110 inline-block rss-link"
    aria-label="rss feed"
    title="RSS Feed"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="rss-icon"
      ><path
        d="M19 20.001C19 11.729 12.271 5 4 5v2c7.168 0 13 5.832 13 13.001h2z"
      ></path><path
        d="M12 20.001h2C14 14.486 9.514 10 4 10v2c4.411 0 8 3.589 8 8.001z"
      ></path><circle cx="6" cy="18" r="2"></circle>
    </svg>
  </a>
</div>

<style>
  .social-icons {
    @apply flex-wrap justify-center gap-1;
  }
  .link-button {
    @apply relative p-2 sm:p-1;
  }
  .social-tooltip {
    @apply pointer-events-none absolute right-0 top-0 z-10 whitespace-nowrap rounded border border-skin-line bg-skin-fill px-2 py-1 text-xs text-skin-base/80 opacity-0 shadow-sm transition;
    transform: translateY(-120%);
  }
  .link-button:hover .social-tooltip {
    @apply opacity-100;
    transform: translateY(-140%);
  }
  
  /* .social-icons .rss-icon {
    @apply mb-2 h-6 w-6 scale-110 fill-skin-accent sm:mb-3 sm:scale-125;
  } */
</style>
