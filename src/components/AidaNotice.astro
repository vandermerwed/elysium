---
function generateAIUsageSentence(aiUsage: string[]) {
  if (!aiUsage || aiUsage.length === 0 || aiUsage.includes("none")) {
    return "No AI tools were used in the creation of the content on this page.";
  }

  const usageDescriptions = {
    research: "researching information",
    proofreading: "proofreading and grammar correction",
    editing: "editing and refining content",
    "code-assistance": "code assistance",
    ideation: "organizing and structuring ideas",
    "image-generation": "generating images",
    "documentation": "formatting and structuring documentation",
    "system-design": "system design and architecture",
    "data-analysis": "data analysis",
  };

  const descriptions = aiUsage
    .filter((tag): tag is keyof typeof usageDescriptions => tag in usageDescriptions)
    .map((tag) => usageDescriptions[tag]);

  if (descriptions.length === 1) {
    return `AI was used for ${descriptions[0]} in the creation of the content on this page.`;
  } else {
    const last = descriptions.pop();
    return `AI was used for ${descriptions.join(", ")}, and ${last} in the creation of the content on this page.`;
  }
}

const { aiUsage = [] } = Astro.props;
const aiUsageSentence = generateAIUsageSentence(aiUsage);
---
<div class="aida-notice not-prose">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="aida-icon"
    width="14"
    height="14"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    aria-hidden="true"
  >
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <path d="M6 4m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path>
    <path d="M12 2v2"></path>
    <path d="M9 12v9"></path>
    <path d="M15 12v9"></path>
    <path d="M5 16l4 -2"></path>
    <path d="M15 14l4 2"></path>
    <path d="M9 18h6"></path>
    <path d="M10 8v.01"></path>
    <path d="M14 8v.01"></path>
  </svg>
  <span>{aiUsageSentence} <a href="/ai">Policy</a>.</span>
</div>

<style>
  .aida-notice {
    @apply flex items-center gap-2 font-mono text-xs;
    color: rgb(var(--color-base));
  }
  .aida-icon {
    @apply h-3.5 w-3.5 flex-shrink-0;
    stroke: rgb(var(--color-border-muted));
    fill: none;
  }
  .aida-notice a {
    color: rgb(var(--color-base));
    text-decoration: underline;
    text-decoration-style: dotted;
    text-underline-offset: 3px;
    text-decoration-color: rgb(var(--color-border-muted));
    transition: color var(--transition-base);
  }
  .aida-notice a:hover {
    color: rgb(var(--color-accent));
  }
</style>